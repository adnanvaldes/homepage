<?xml version="1.0" encoding="utf-8"?>
<rss version="2.0"><channel><title>Adnan Valdes</title><link>https://adnanvaldes.pages.dev/</link><description/><lastBuildDate>Sun, 22 Dec 2024 13:25:27 -0800</lastBuildDate><item><title>Using subpackages in Django</title><link>https://adnanvaldes.pages.dev/202412221228.html</link><description>&lt;p&gt;I am working on a Learning Management System using Django. It started fairly simply, with &lt;code&gt;startapp lms&lt;/code&gt;, a few models defined in a single &lt;code&gt;models.py&lt;/code&gt; file, and a basic Django file structure. Eventually, I had to split my models file using Python subpackages to manage the complexity.&lt;/p&gt;
&lt;p&gt;The problem started when my &lt;code&gt;models.py&lt;/code&gt; file contained just a few models:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="kn"&gt;from&lt;/span&gt; &lt;span class="nn"&gt;django.db&lt;/span&gt; &lt;span class="kn"&gt;import&lt;/span&gt; &lt;span class="n"&gt;models&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Course&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Lesson&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Quiz&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Question&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;


&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Answer&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;As my project grew in size and complexity I found that the &lt;code&gt;models.py&lt;/code&gt;, originally concise and manageable, grew into hundreds of lines with multiple semi-related models. For example, at some point I realized that I needed to include a &lt;code&gt;Content&lt;/code&gt; model to manage images and videos embedded in the courses. It started simple:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="o"&gt;...&lt;/span&gt;

&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;Content&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;models&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;Model&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="o"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;After a while I realized that are different &lt;em&gt;types&lt;/em&gt; of content that the application will use. Around the same time I also realized that I was repeating myself a lot in the LMS models themselves - all of them have similar properties, after all - so I refactored some of the code and created a new file, &lt;code&gt;base_models.py&lt;/code&gt; that included &lt;code&gt;BaseModel&lt;/code&gt; and &lt;code&gt;BaseContent&lt;/code&gt; models.&lt;/p&gt;
&lt;p&gt;This worked for a while, but then I also added three sub-classes to &lt;code&gt;models.py&lt;/code&gt;: &lt;code&gt;TextContent&lt;/code&gt;, &lt;code&gt;ImageContent&lt;/code&gt;, and &lt;code&gt;VideoContent&lt;/code&gt;. I expanded the models to include student tracking, using &lt;code&gt;UserQuizAttempt&lt;/code&gt; and &lt;code&gt;UserLessonProgress&lt;/code&gt;. I started to dread opening the models file: a wall of text …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Sun, 22 Dec 2024 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2024-12-22:/202412221228.html</guid><category>blog</category><category>django</category></item><item><title>Nice Renice</title><link>https://adnanvaldes.pages.dev/202411180838.html</link><description>&lt;h2&gt;How nice are your processes?&lt;/h2&gt;
&lt;p&gt;The &lt;a href="vault/top.md"&gt;top&lt;/a&gt; command has a row labelled "%Cpu(s)". It looks like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c"&gt;%Cpu(s):  1.7 us,  0.6 sy,  0.0 ni, 97.1 id,  0.0 wa,  0.6 hi,  0.0 si,  0.0 st`&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Here is what &lt;code&gt;man top&lt;/code&gt; has to say about them:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;us&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;un&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;niced&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;processes&lt;/span&gt;
&lt;span class="n"&gt;sy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kernel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;processes&lt;/span&gt;
&lt;span class="n"&gt;ni&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;running&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;niced&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;user&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;processes&lt;/span&gt;
&lt;span class="n"&gt;id&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;spent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;in&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;kernel&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;idle&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;handler&lt;/span&gt;
&lt;span class="n"&gt;wa&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;waiting&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;for&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;I&lt;/span&gt;&lt;span class="o"&gt;/&lt;/span&gt;&lt;span class="n"&gt;O&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;completion&lt;/span&gt;
&lt;span class="n"&gt;hi&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;spent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;servicing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hardware&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;interrupts&lt;/span&gt;
&lt;span class="n"&gt;si&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;spent&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;servicing&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;software&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;interrupts&lt;/span&gt;
&lt;span class="n"&gt;st&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;time&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;stolen&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;from&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="k"&gt;this&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;vm&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;by&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;the&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;hypervisor&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;What even is an &lt;code&gt;un-niced&lt;/code&gt; process? &lt;/p&gt;
&lt;p&gt;Basically, Linux has a concept of how "nice" a program is - a value that describes how much priority the process is requesting from the CPU scheduler. In other words, the "nicer" a program is, the less priority it requests, and therefore the more it allows other processes to do their thing (see &lt;a href="https://en.wikipedia.org/wiki/Nice_(Unix)"&gt;wikipedia entry&lt;/a&gt;).&lt;/p&gt;
&lt;p&gt;And this is incredible, because it means we can define the niceness of a background task, for example, such that we can continue working in the mean time. Consider the following: you run a media server, and you want to compress a bunch of your movies. This is a long term task, and you want to continue serving files in the mean time. You could some thing like this:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;nice -n 19 compress file
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;In general, the higher the niceness value of …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Mon, 18 Nov 2024 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2024-11-18:/202411180838.html</guid><category>blog</category></item><item><title>task-cli</title><link>https://adnanvaldes.pages.dev/202411171134.html</link><description>&lt;p&gt;&lt;a href="https://github.com/adnanvaldes/task-cli"&gt;&lt;code&gt;task-cli&lt;/code&gt;&lt;/a&gt; is the first project I'm working on from &lt;a href="https://roadmap.sh"&gt;roadmap.sh&lt;/a&gt; as part of their &lt;a href="https://roadmap.sh/backend/projects"&gt;Backend Projects&lt;/a&gt;.&lt;/p&gt;
&lt;p&gt;I decided to write it in JavaScript using Node.js rather than defaulting to my go-to of Python because I wanted to learn how those two work, given how ubiquitous they are.&lt;/p&gt;
&lt;p&gt;The major objective here was to get started with JavaScript and NodeJs. While I don't know that my code is quite idiomatic yet, at least I'm feeling more comfortable with the syntax and some of the build-in functionality.&lt;/p&gt;
&lt;p&gt;One of the things I was excited to use was &lt;code&gt;switch case&lt;/code&gt; statements. In previous Python code, for example, I've used (but tried to avoid!) series of &lt;code&gt;if...else&lt;/code&gt; statements:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;def&lt;/span&gt; &lt;span class="nf"&gt;switch&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;status&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;if&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;todo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;:&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;
    &lt;span class="k"&gt;elif&lt;/span&gt; &lt;span class="n"&gt;status&lt;/span&gt; &lt;span class="o"&gt;==&lt;/span&gt; &lt;span class="s2"&gt;&amp;quot;mark-in-progress&amp;quot;&lt;/span&gt;
        &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;blockquote&gt;
&lt;p&gt;[!aside]
As of version 3.10, Python has a "structural pattern matching" feature introduced by &lt;a href="https://peps.python.org/pep-0636/"&gt;PEP 636&lt;/a&gt;.
&lt;/p&gt;
&lt;/blockquote&gt;
&lt;p&gt;With JavaScript, I was able to apply similar logic without having a long series of comparison operations:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="k"&gt;if&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;taskID&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;==&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;id&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="k"&gt;switch&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;{&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;todo&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;task&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;todo&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;mark-in-progress&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;task&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;in-progress&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;case&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;mark-done&amp;quot;&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="nx"&gt;item&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;task&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="nx"&gt;status&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;done&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;break&lt;/span&gt;&lt;span class="p"&gt;;&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="k"&gt;default&lt;/span&gt;&lt;span class="o"&gt;:&lt;/span&gt;
&lt;span class="w"&gt;            &lt;/span&gt;&lt;span class="k"&gt;throw&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ow"&gt;new&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="ne"&gt;Error&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="s2"&gt;&amp;quot;Mark status is one of [todo | mark-in-progress | mark-done]&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;);&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;One of the interesting things about this is the requirement to have a &lt;code&gt;break&lt;/code&gt; statement for each case. Without them, the switch case will still work, but the &lt;code&gt;default&lt;/code&gt; case always runs.&lt;/p&gt;
&lt;p&gt;Another fun part of playing with JavaScript ES6 is the ability to use the &lt;code&gt;class&lt;/code&gt; keyword. Coming …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Sun, 17 Nov 2024 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2024-11-17:/202411171134.html</guid><category>blog</category><category>js programming</category></item><item><title>The Vanished Birds</title><link>https://adnanvaldes.pages.dev/202301031737.html</link><description>&lt;p&gt;&lt;quote&gt;He wanted to warn these children that time was not their friend; that though today might seem special, there would be a tomorrow, and a day after that; that the best-case scenario of a well-spent life was the slow and steady unravelling of the heart’s knot.&lt;/quote&gt;&lt;/p&gt;
&lt;p&gt;&lt;em&gt;The Vanished Birds&lt;/em&gt; is primarily a novel about time and place in a universe worthy of any modern space opera.  The story takes place in a future where advanced technology has allowed humanity to explore and settle other planets, but this progress has also led to the rise of powerful corporations that control and profit from these ventures. Throughout the book, the characters must deal with the effects of this capitalist exploitation, whether it's the harsh working conditions or corporate intrigue. In this way, the book raises important questions about the consequences of unchecked capitalism and the ways it can alienate and exploit individuals.&lt;/p&gt;
&lt;p&gt;The beginning of the novel itself consists of a sort of novella (which as I found out after writing most of this review was originally published as a short story before being incorporated into the larger novel) that sets up the universe, where we follow a farmer named Kaeda, who grew up in the backwater planet of Umbai-V.  The story describes Kaeda's life develop from when he was a child all the way until he is an old man, punctuated by the staccato of an offworld cargo ship arriving every 15 years to collect the harvest and carrying the …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Tue, 03 Jan 2023 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2023-01-03:/202301031737.html</guid><category>blog</category><category>blog</category><category>writing</category><category>reading</category></item><item><title>State of the Servers</title><link>https://adnanvaldes.pages.dev/202212301843.html</link><description>&lt;p&gt;As the year comes to a close I have 4.5 servers online, with another that is  yet to be built (mostly due to laziness).&lt;/p&gt;
&lt;h3&gt;Trantor&lt;/h3&gt;
&lt;p&gt;My primary server, known as Trantor, has been online for just over a year. Until I build my last server, Trantor is the machine around which the rest of my network is built. It's main purpose is to serve files with NFS to my desktop, though it also runs all my other services (see below) inside VMs managed  by &lt;a href="https://www.proxmox.com/en/"&gt;Proxmox&lt;/a&gt;. &lt;/p&gt;
&lt;p&gt;It is an older set up, that so far has really reinforced in me the idea of giving old hardware a new life. The CPU is a 4th gen Intel that I inherited from a friend who isn't all that much into computers and wanted help upgrading his set up. This is paired with 24 GB RAM and two 4 TB SMR Western Digital Red HDDs.&lt;/p&gt;
&lt;h3&gt;Anacreon&lt;/h3&gt;
&lt;p&gt;The second server I have is called Anacreon. It's a small Lenovo ThinkCentre with an i5-7500T CPU and also 24 GB RAM. The original idea for this server was to use it for all my VMs and services, leaving Trantor entirely as a file server. However, I decided to upgrade my desktop with a new CPU and a smaller case, which gave me enough spare parts to build a 3rd server. &lt;/p&gt;
&lt;p&gt;As a result, Anacreon's job will eventually be to mostly act as an arbiter and another node in a Proxmox High Availability cluster. I probably have …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Fri, 30 Dec 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-12-30:/202212301843.html</guid><category>blog</category><category>sysadmin</category></item><item><title>Flappy Bird The Random Update</title><link>https://adnanvaldes.pages.dev/202212271233.html</link><description>&lt;h3&gt;Random Intervals&lt;/h3&gt;
&lt;p&gt;The first update to the game was to randomise the interval between pipes spawning. &lt;/p&gt;
&lt;p&gt;The logic that spawns new pipes lives inside the &lt;code&gt;update&lt;/code&gt; function of the game's &lt;code&gt;Play&lt;/code&gt; state. It's a fairly simple set-up: if a timer exceeds a preset value, a new pair of pipes is spawned:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- in PlayState:update(dt)&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;span class="kr"&gt;if&lt;/span&gt; &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timer&lt;/span&gt; &lt;span class="o"&gt;&amp;gt;&lt;/span&gt; &lt;span class="mi"&gt;2&lt;/span&gt; &lt;span class="kr"&gt;then&lt;/span&gt;
    &lt;span class="c1"&gt;-- modify the last Y coordinate we placed so pipe gaps aren&amp;#39;t too far apart&lt;/span&gt;
    &lt;span class="c1"&gt;-- no higher than 10 pixels below the top edge of the screen,&lt;/span&gt;
    &lt;span class="c1"&gt;-- and no lower than a gap length (90 pixels) from the bottom&lt;/span&gt;
    &lt;span class="kd"&gt;local&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="nb"&gt;math.max&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;PIPE_HEIGHT&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="mi"&gt;10&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="nb"&gt;math.min&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lastY&lt;/span&gt; &lt;span class="o"&gt;+&lt;/span&gt; &lt;span class="nb"&gt;math.random&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="mi"&gt;20&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt; &lt;span class="n"&gt;VIRTUAL_HEIGHT&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="mi"&gt;90&lt;/span&gt; &lt;span class="o"&gt;-&lt;/span&gt; &lt;span class="n"&gt;PIPE_HEIGHT&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
    &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;lastY&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;y&lt;/span&gt;

    &lt;span class="c1"&gt;-- add a new pipe pair at the end of the screen at our new Y&lt;/span&gt;
    &lt;span class="nb"&gt;table.insert&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;pipePairs&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;PipePair&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

    &lt;span class="c1"&gt;-- reset timer&lt;/span&gt;
    &lt;span class="n"&gt;self&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;timer&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="mi"&gt;0&lt;/span&gt;
&lt;span class="kr"&gt;end&lt;/span&gt;
&lt;span class="p"&gt;...&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;My first thought was to simply add a call to &lt;code&gt;math.random()&lt;/code&gt; as part of the &lt;code&gt;if&lt;/code&gt; statement. This was a &lt;em&gt;terrible&lt;/em&gt; idea and made the game absolutely cursed - hundreds if not thousands not pipes were being generated and it made the game unplayable. In hindsight this was obvious:  by placing &lt;code&gt;if self.timer &amp;gt; math.random(2,5) then&lt;/code&gt; as part of the &lt;code&gt;update&lt;/code&gt; loop I was forcing the game to do a check &lt;em&gt;every single frame&lt;/em&gt;, and thereby causing pipes to spawn at incredibly high rates.&lt;/p&gt;
&lt;p&gt;The solution was quite simple. As part of the game state I initialised a variable called &lt;code&gt;self …&lt;/code&gt;&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Tue, 27 Dec 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-12-27:/202212271233.html</guid><category>blog</category><category>programming</category><category>gamedev</category><category>blog</category><category>writing</category></item><item><title>Pong - The AI Update</title><link>https://adnanvaldes.pages.dev/202212231346.html</link><description>&lt;p&gt;The first lecture on &lt;a href="https://cs50.harvard.edu/games/2018/"&gt;CS50's introduction to game development&lt;/a&gt; is about creating a small Pong game using &lt;a href="https://love2d.org/"&gt;Love2D&lt;/a&gt;.  While the video runs you through the basics of &lt;a href="https://www.lua.org/"&gt;Lua&lt;/a&gt; and a step-by -step process of creating a Pong game from scratch, the post-lecture assignment is where things get a bit more interesting.&lt;/p&gt;
&lt;p&gt;What I like the most about these projects, though, is the ability to continue extending them as one pleases. I was able to complete the task (in an exceedingly crude manner) of adding computer controlled movement to one of the paddles in about 5 min. But to do it well took much longer (and by well I mean it's acceptable but still horribly jittery!). I also added a few touches that I thought were kinda fun.&lt;/p&gt;
&lt;h2&gt;AI Update&lt;/h2&gt;
&lt;p&gt;The first problem I tackled was the one directly stated in the project: to create an AI-controlled paddle. Like I said above, my first solution was horrible crude, but &lt;em&gt;technically&lt;/em&gt; it worked:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;-- In love.update(dt) function&lt;/span&gt;
&lt;span class="n"&gt;player2&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt; &lt;span class="o"&gt;=&lt;/span&gt; &lt;span class="n"&gt;ball&lt;/span&gt;&lt;span class="p"&gt;.&lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Of course, simply setting the right paddle's &lt;code&gt;y&lt;/code&gt; value equal to the ball's is not very interesting (and also makes the game impossible to win). This also doesn't account for the fact that the ball's velocity increases with every bounce, while the paddle's should maintain a constant speed to make the game more challenging.&lt;/p&gt;
&lt;p&gt;To solve this, I made ample use of conditionals. The idea is to check whether the ball is above or bellow the paddle and then to …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Fri, 23 Dec 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-12-23:/202212231346.html</guid><category>blog</category><category>gamedev</category><category>cs</category><category>programming</category></item><item><title>Year of Reflection</title><link>https://adnanvaldes.pages.dev/202212201918.html</link><description>&lt;p&gt;For 2023, I am looking for more solidity. Something foundational, basic - a framework upon which I can prop up and build other aspects of my life. I suppose that a way to think about it is in the context of goals; far too often I feel like I am wasting time rather than living intentionally, swept up by currents that I often see coming but whose course and final destination I cannot fathom.&lt;/p&gt;
&lt;p&gt;Yet in themselves goals cannot possibly achieve this. At best they are milestone markers of events that occurred prior, up to the point when they are complete, and at worst simply reminders of all the things that were &lt;em&gt;not&lt;/em&gt; accomplished. My interest here is far more organic, to have something that is growing and always present, not in the future or the past.&lt;/p&gt;
&lt;p&gt;Perhaps a different way of thinking about it is in terms of story or narrative. One aspect that attracts me a lot from narrative arcs is that they feel coherent, that there is not wasted breath - think of Chekhov and his gun. There may be specific goals in narrative, but nobody reads fiction because of milestones within the story itself: the narratives are in constant motion.  I understand that life itself is not structured in such a way necessarily, but even an approximation would be well received. &lt;/p&gt;
&lt;p&gt;I know I have been yearning for this for a little while now. In 2022 I experienced a slow drop-off from open world RPG games. For instance …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Tue, 20 Dec 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-12-20:/202212201918.html</guid><category>blog</category><category>health</category><category>blog</category><category>writing</category></item><item><title>Data</title><link>https://adnanvaldes.pages.dev/data.html</link><description>&lt;h2&gt;Problem domain vs program&lt;/h2&gt;
&lt;p&gt;In a problem domain we have information regarding how the system works. For example, in a programn about traffic lights the problem domain will include &lt;em&gt;information&lt;/em&gt; about the state of the lights - red, yellow, green. The program itself, however, will &lt;em&gt;represent&lt;/em&gt; the information using &lt;em&gt;data&lt;/em&gt; in the program - for example, representing a red light as the natural 0.&lt;/p&gt;
&lt;p&gt;The inverse of the relationship is that we can &lt;em&gt;interpret&lt;/em&gt; the state of the data, the natural 0 for example, as a red light.&lt;/p&gt;
&lt;h2&gt;Data definitions to describe how we represent data&lt;/h2&gt;
&lt;p&gt;Begin with a data definition that represents the information at hand. For example, for a traffic light problem, we might say the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;;; Data:&lt;/span&gt;

&lt;span class="c1"&gt;;; TLColor is one of:&lt;/span&gt;
&lt;span class="c1"&gt;;; - 0&lt;/span&gt;
&lt;span class="c1"&gt;;; - 1&lt;/span&gt;
&lt;span class="c1"&gt;;; - 2&lt;/span&gt;
&lt;span class="c1"&gt;;; interp. color of a traffic light - 0 is red, 1 yellow, 2 green&lt;/span&gt;
&lt;span class="c"&gt;#;&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;define&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;fn-for-tlcolor&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;cond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)]&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="n"&gt;p&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;...&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;

&lt;span class="c1"&gt;;; Functions:&lt;/span&gt;

&lt;span class="c1"&gt;;; TLColor -&amp;gt; TLColor ; Note how it only consumes a TLColor, which must be [1,2,3]&lt;/span&gt;
&lt;span class="c1"&gt;;; produce next color of traffic light&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;check-expect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next-color&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;check-expect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next-color&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;check-expect&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next-color&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="c1"&gt;; (define (next-color c) 0)&lt;/span&gt;

&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;define&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;next-color&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="k"&gt;cond&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;0&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;          &lt;/span&gt;&lt;span class="p"&gt;[(&lt;/span&gt;&lt;span class="nb"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;c&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="mi"&gt;1&lt;/span&gt;&lt;span class="p"&gt;]&lt;/span&gt;
&lt;span class="w"&gt;    &lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Wed, 07 Dec 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-12-07:/data.html</guid><category>blog</category></item><item><title>A Master of Djinn</title><link>https://adnanvaldes.pages.dev/202211261850.html</link><description>&lt;p&gt;&lt;quote&gt;Djinn are a lot like the rest of us,” Fatma said. She plucked a book out of the air that came flying, without stopping her stride. “They just want to know the odd things they’re interested in are appreciated.&lt;/quote&gt;&lt;/p&gt;
&lt;p&gt;I finished reading P. Djèlí Clark's &lt;em&gt;A Master Of Djinn&lt;/em&gt; last night. I came across it after scanning the 2021 Nebula Awards.  It's not my usual type of novel - for the most part I look for hard sci-fi space operas with big spaceships and galactic scale events.&lt;/p&gt;
&lt;p&gt;I should point out, too, that &lt;em&gt;A Master Of Djinn&lt;/em&gt; had big shoes to fill. It won the award, but one of the other nominations was Arkady Martine's &lt;em&gt;A Desolation called Peace&lt;/em&gt; which is now one of my favourite books and an absolutely fascinating universe.&lt;/p&gt;
&lt;p&gt;Imagine my surprise then when I was maybe 30 pages in and immediately hooked and amazed at the world that Clark created. The story line itself is not particularly complex: we follow an investigator who is trying to solve a murder. &lt;/p&gt;
&lt;p&gt;But the setting!&lt;/p&gt;
&lt;p&gt;The story develops in Cairo in the early 20th century. Around 40 years prior to the events described in the book, a magician called al-Jahiz broke the barrier between this and the magical world. Although initially the world was taken by surprise, the almost half decade since al-Jahiz has made the existence of the djinn fairly routine. They now live, work, and love in the same places as humans do.&lt;/p&gt;
&lt;p&gt;With charming descriptions of …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Sun, 27 Nov 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-11-27:/202211261850.html</guid><category>blog</category><category>blog</category><category>reading</category><category>writing</category></item><item><title>Setting up this blog with NGINX</title><link>https://adnanvaldes.pages.dev/202211261450.html</link><description>&lt;p&gt;One of the main goals I have for this goal is to make it as &lt;strong&gt;friction&lt;/strong&gt;-less as possible to write. In an ideal world, I would be able to open my text editor (I use &lt;a href="https://neovim.io/"&gt;nvim&lt;/a&gt; and &lt;a href="https://obsidian.md/"&gt;Obsidian&lt;/a&gt;), write some content and then, with a single command, publish.&lt;/p&gt;
&lt;p&gt;I looked at solutions like &lt;a href="https://ghost.org/"&gt;Ghost&lt;/a&gt; and &lt;a href="https://wordpress.com/"&gt;WordPress&lt;/a&gt;, but they are both, well, &lt;em&gt;too much&lt;/em&gt;. Or rather, they are designed, as per Ghost's tagline, for "the creator economy". That is, they include analytics, membership, revenue charts, etc. etc. I want none of that.&lt;/p&gt;
&lt;p&gt;I just want a static page with a bunch of html. Zero bells and whistles.&lt;/p&gt;
&lt;p&gt;So the next option was to either build something with a static site generator like &lt;a href="https://getpelican.com/"&gt;Pelican&lt;/a&gt; (which is what I'm using now!) or host the blog on a site like &lt;a href="https://bearblog.dev/"&gt;Bear Blog&lt;/a&gt; or &lt;a href="https://writefreely.org/"&gt;Writefreely&lt;/a&gt;. The latter two are pretty cool, too! Bear Blog is the essence of simplicity (and part of the inspiration for the design of this blog), while Writefreely's integration with the Fediverse is awesome. Unfortunately, the design is pretty set in stone, hosting images is more difficult, and to publish one has to place their text on a browser.&lt;/p&gt;
&lt;p&gt;For context, the way this blog was deployed before was through Cloudflare Pages. The html and css files are generated on my computer and then I had to manually upload a folder with all the html to the project page. Far too tedious, in my opinion.&lt;/p&gt;
&lt;p&gt;What I've done instead is …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Sat, 26 Nov 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-11-26:/202211261450.html</guid><category>blog</category><category>blog</category><category>sysadmin</category><category>writing</category></item><item><title>Consuming feeds</title><link>https://adnanvaldes.pages.dev/202208181152.html</link><description>&lt;p&gt;Until recently, I have been consuming RSS feeds by way of a self-hosted &lt;a href="https://nextcloud.com/"&gt;Nextcloud&lt;/a&gt; instance that delivers them to my phone. The problem is that using a mobile platform invariably leads to a more shallow reading experience - when scrolling through a large set of feeds it starts to feel more like a news aggregator site like Reddit and less like a curated feed (though I suppose it doesn't help that I subscribe to the front page of &lt;a href="https://news.ycombinator.com"&gt;Hacker News&lt;/a&gt;). I am far less likely to take notes or really remember what I read, and instead browsing these feeds turned into a time wasting activity more than anything. &lt;/p&gt;
&lt;p&gt;To combat this, I started subscribing to more and more individual blogs and long form journalism sites, such as &lt;a href="https://www.theguardian.com/news/series/the-long-read"&gt;The Guardian Long Read&lt;/a&gt; and &lt;a href="https://longreads.com"&gt;Longreads&lt;/a&gt;. I enjoy the format a lot more and it helps my feeds populate with non-technology commentary. What I don't like is mobile screens and computer monitors: I find these screens exhausting when trying to read for long periods of time, they have glare and, worse, they are incredibly distracting.&lt;/p&gt;
&lt;p&gt;The solution, of course, is to use an e-reader.&lt;/p&gt;
&lt;p&gt;The end goal of this little project was to have remote access to long form RSS feeds on my kindle without adding too much friction. To work within these constraints I could not rely on manual updates or on connecting my kindle to my desktop. I just wanted the feeds to &lt;em&gt;magically&lt;/em&gt; appear on my kindle's library, ready to be …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Sun, 28 Aug 2022 00:00:00 -0700</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-08-28:/202208181152.html</guid><category>blog</category><category>blog</category><category>writing</category></item><item><title>The personal web</title><link>https://adnanvaldes.pages.dev/20220706.html</link><description>&lt;p&gt;I am very keen on the idea of a decentralised web, insofar as that is possible (centralisation due to ISPs, data centres, DNS servers, etc. notwithstanding), and while I love the &lt;em&gt;idea&lt;/em&gt; of 100% peer-to-peer communication, I don't believe it is a feasible way to organise the web. I don't really have the technical expertise to argue the details of crypto/blockchain-based internets, but from what I see regularly on Hacker News I am certainly not a proponent of those technologies for this particular issue.&lt;/p&gt;
&lt;p&gt;I should point out that this isn't entirely about privacy - though I do care about being able to maintain the privacy of internet users - nor is it entirely about P2P protocols - but I do think those are pretty cool! Rather, what I want to see is a way to enable access to an internet that has personality instead of branding, that is organic instead of defined by market studies and A/B testing.&lt;/p&gt;
&lt;p&gt;Given how much technology is in our lives now, how defined by it we have become, I suspect we would all be better off being at least somewhat familiar with the workings of the internet; in particular, with how we are able to express ourselves on this medium without explicit reliance on third-party controls. What I mean by this is depending on TikTok, Google, Microsoft, etc. for access to the largest communication network in existence seems like a poor choice.&lt;/p&gt;
&lt;p&gt;Not that I would like to propose we all become experts in …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Wed, 06 Jul 2022 00:00:00 -0700</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-07-06:/20220706.html</guid><category>blog</category><category>blog</category><category>writing</category></item><item><title>Learning a Language</title><link>https://adnanvaldes.pages.dev/202204251226.html</link><description>&lt;h1&gt;Five different things&lt;/h1&gt;
&lt;ol&gt;
&lt;li&gt;Syntax: how to write language constructs?&lt;/li&gt;
&lt;li&gt;Semantics: What to programs mean? How do the typechecking and evaluation rules work?&lt;/li&gt;
&lt;li&gt;Idioms: What are typical patterns for using language features to express your computation?&lt;ol&gt;
&lt;li&gt;It's not enough to iknow that if/else expressoins work; we need to know &lt;em&gt;when&lt;/em&gt; to use them to represent and recognize patterns of use.&lt;/li&gt;
&lt;/ol&gt;
&lt;/li&gt;
&lt;li&gt;Libraries: What facilities does the language (or a well-known project) provide as "standard"? (eg. file access, data structures, etc.)&lt;/li&gt;
&lt;li&gt;Tools: What do language implementations provide to make your job easier? (eg. REPL, debugger, code formatter, etc)&lt;/li&gt;
&lt;/ol&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Mon, 25 Apr 2022 00:00:00 -0700</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-04-25:/202204251226.html</guid><category>blog</category><category>language</category></item><item><title>Precision Flight Controls</title><link>https://adnanvaldes.pages.dev/202204191535.html</link><description>&lt;h2&gt;Installing Win10 on old hardware&lt;/h2&gt;
&lt;p&gt;Originally Win 7 Pro installed on two WD Blue HDDs. Target set up: Windows 10 on a WD Blue 500G SSD to speed up boot times.&lt;/p&gt;
&lt;p&gt;Problems encountered: old motherboard, no driver support, "missing media drivers", "no OS found" after install.&lt;/p&gt;
&lt;p&gt;Solution: Install Windows 10 on SSD via a different motherboard and configure. Then plug SSD to old computer&lt;/p&gt;
&lt;h2&gt;Setting up X-Plane&lt;/h2&gt;
&lt;p&gt;X-Plane 11 installation was straightforward. NVIDIA drivers needed to be updated: GeForce GTX 750 Ti installed with drivers version 4xx. Update to 512.15.&lt;/p&gt;
&lt;p&gt;X-Plane appears to work and boots well. However, there is concern over COM port usability for hardware flight controls. Install PFC drivers; need to compare FSUIPC and XUIPC -&amp;gt; specifically, check if the later depends on the former, and whether it is required. Nonetheless, download all DLL as a precaution.&lt;/p&gt;
&lt;p&gt;Hardware was working before, so plug in old HDDs and browse for relevant files. Copy Custom Maps into X-Plane, copy PFCTest software to manage COM port. Suspect ignition issue at hardware level related to this or mismatch of hardware inputs and &lt;code&gt;datarefs&lt;/code&gt; assignment.&lt;/p&gt;
&lt;h3&gt;Testing network communication&lt;/h3&gt;
&lt;p&gt;Install X-Plane 11 on Arch Linux to set up instructor station. Concerns: OS incompatibility.&lt;/p&gt;
&lt;h3&gt;Running on Linux&lt;/h3&gt;
&lt;p&gt;Installer fails due to missing &lt;code&gt;libGLU.so.1&lt;/code&gt;. Name is apparently outdated, and often just a symlink for &lt;code&gt;glu&lt;/code&gt;. To install, &lt;code&gt;yay -S glu&lt;/code&gt;; after a .14 MiB download, X-Plane installer runs.&lt;/p&gt;
&lt;h2&gt;April 20th, 2022&lt;/h2&gt;
&lt;p&gt;After installing X-Plane on both computers and plugging all hardware in, including …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Tue, 19 Apr 2022 00:00:00 -0700</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-04-19:/202204191535.html</guid><category>blog</category><category>cs</category><category>programming</category><category>work</category></item><item><title>Zork Server</title><link>https://adnanvaldes.pages.dev/202203071616.html</link><description>&lt;p&gt;I love text adventure games. I am not very good at them, but I very much enjoy the world building and interactive aspect of text-based terminal games, in much the same way that I love tabletop RPGs like &lt;em&gt;Dungeons and Dragons&lt;/em&gt; or &lt;em&gt;Stars Without Number&lt;/em&gt;.&lt;/p&gt;
&lt;p&gt;Text adventures are also excellent candidates for in-flight entertainment on long-haul routes. I recently travelled to Delhi from Vancouver, on a flight that was scheduled 3 days after the beginning of the Russian invasion of Ukraine. Because of the closure of Russian airspace to most airlines, my route was YVR -&amp;gt; YYZ (3 hour stop) YYZ -&amp;gt; Delhi. In other words, the ETE changed from about 13 hours to just over 22 hours.&lt;/p&gt;
&lt;p&gt;To set up, I bought the Zork Anthology through Steam. I know Infocom has made Zork 1 - 3 &lt;a href="http://www.infocom-if.org/downloads/downloads.html"&gt;available for free&lt;/a&gt;, but because this was a fairly late schedule change I decided to go the easy way and shell out $8.00 for the whole set.&lt;/p&gt;
&lt;p&gt;The games themselves work well, but I had a few problems with the set-up. To start with, I have Manjaro installed on all my computers, but the Zork Anthology only has a Windows release on Steam. Not much of an issue in itself: I regularly use Proton to play on Linux and I have had very few problems. However, the thought of running Proton to &lt;em&gt;then&lt;/em&gt; run a DOS emulator to play Zork rubbed me the wrong way.&lt;/p&gt;
&lt;p&gt;The other option I've seen is to play Zork through …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Mon, 07 Mar 2022 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2022-03-07:/202203071616.html</guid><category>blog</category><category>cs</category><category>linux</category><category>project</category></item><item><title>Admin</title><link>https://adnanvaldes.pages.dev/admin.html</link><description>&lt;h2&gt;Advanced configuration&lt;/h2&gt;
&lt;p&gt;From registered models, Django automatically includes record indentification via the model's &lt;code&gt;__str__()&lt;/code&gt; method. This also includes a bulk delete operation for records of a particular model.&lt;/p&gt;
&lt;p&gt;However, Django also gives us the ability to further customise the interface. We can do things like:&lt;/p&gt;
&lt;ul&gt;
&lt;li&gt;List views&lt;ul&gt;
&lt;li&gt;Add additional fields or information for each record&lt;/li&gt;
&lt;li&gt;Add filters to select records&lt;/li&gt;
&lt;li&gt;Add additional options to the actions menu, as well as choose where the menu is&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;Detail views&lt;ul&gt;
&lt;li&gt;Choose which fields to display, which to exlucde, their order, grouping, etc.&lt;/li&gt;
&lt;li&gt;Add related fields to a record to allow inline editing&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;h3&gt;Register ModelAdmin class&lt;/h3&gt;
&lt;p&gt;To change how a model is displayed on the admin interface we must define and register a &lt;a href="https://docs.djangoproject.com/en/3.1/ref/contrib/admin/#modeladmin-objects"&gt;ModelAdmin&lt;/a&gt; class, which is used to define the layout of the admin site.&lt;/p&gt;
&lt;p&gt;For example, given the Terminus Library Author model, we can do the following:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# filename: terminus/catalog/admin.py&lt;/span&gt;

&lt;span class="c1"&gt;# Defining admin class&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;AuthorAdmin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelAdmin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;

&lt;span class="c1"&gt;# Register the admin class with an associated admin moodel&lt;/span&gt;
&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;site&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Author&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt; &lt;span class="n"&gt;AuthorAdmin&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Of course, the above admin class is empty, so the views will remain unchanged for now.&lt;/p&gt;
&lt;p&gt;We can also register the models using a decorator on the relevant admin class, like so:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# filename: terminus/catalog/admin.py&lt;/span&gt;

&lt;span class="nd"&gt;@admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;register&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;Book&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="k"&gt;class&lt;/span&gt; &lt;span class="nc"&gt;BookAdmin&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;admin&lt;/span&gt;&lt;span class="o"&gt;.&lt;/span&gt;&lt;span class="n"&gt;ModelAdmin&lt;/span&gt;&lt;span class="p"&gt;):&lt;/span&gt;
    &lt;span class="k"&gt;pass&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;h2&gt;List view&lt;/h2&gt;
&lt;h3&gt;Customise ModelAdmin class&lt;/h3&gt;
&lt;p&gt;By default, Django uses a model's &lt;code&gt;__str__()&lt;/code&gt; class to display information on the admin list view. While is is not bad design for smaller projects, once the scale …&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Mon, 01 Mar 2021 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2021-03-01:/admin.html</guid><category>blog</category></item><item><title>Add_ssh_key</title><link>https://adnanvaldes.pages.dev/add_ssh_key.html</link><description>&lt;h2&gt;Generate SSH keys&lt;/h2&gt;
&lt;p&gt;&lt;code&gt;ssh-keygen -t [OPTIONS]&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Note than RSA should be avoided, unless ed25519 is not available.&lt;/p&gt;
&lt;h2&gt;Configure multiple keys for different servers&lt;/h2&gt;
&lt;p&gt;To manage different keys for different servers, create an ssh config file:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;~/.ssh/config&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;In it, use the following synstax:&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host github.com
  HostName github.com
  User git
  IdentityFile ~/.ssh/_id_rsa
  IdentitiesOnly yes
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Additionally, we can change the &lt;code&gt;Host&lt;/code&gt; header while keeping the appropriate &lt;code&gt;HostName&lt;/code&gt; to access servers as an alias, such that&lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;Host myserver
    HostName ssh.steve.com
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;Allows an SSH connection into &lt;code&gt;ssh.steve.com&lt;/code&gt; by simply running &lt;code&gt;ssh myserver&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Note, too, that to avoid entering SSH passwords every time we should add
&lt;code&gt;Host *
    AddKeysToAgent yes
    UseKeychain yes&lt;/code&gt;&lt;/p&gt;
&lt;h2&gt;Send SSH pub key to server&lt;/h2&gt;
&lt;p&gt;Use the &lt;code&gt;ssh-copy-id&lt;/code&gt; command to send the appropriate files to the server. Note that if using a different file name (which would be the case if followed above steps), the command structure is as follows:&lt;/p&gt;
&lt;p&gt;&lt;code&gt;ssh-copy-id -i ~/.ssh/path/to/key USER@SERVER&lt;/code&gt;&lt;/p&gt;
&lt;p&gt;Note that the command does NOT require a references to the &lt;code&gt;.pub&lt;/code&gt; file, just the key itself.&lt;/p&gt;
&lt;h2&gt;Using hostnames instead of IPs&lt;/h2&gt;
&lt;p&gt;For LAN connections, ensure that a DNS record is set for the host name. On a Pi-Hole, for instance, set a DNS record named &lt;code&gt;anachreon.earth&lt;/code&gt; to point at &lt;code&gt;192.168.1.98&lt;/code&gt;.&lt;/p&gt;
&lt;p&gt;Then use &lt;code&gt;anachreon.earth&lt;/code&gt; in the ssh config file.&lt;/p&gt;</description><dc:creator xmlns:dc="http://purl.org/dc/elements/1.1/">Adnan Valdes</dc:creator><pubDate>Tue, 02 Feb 2021 00:00:00 -0800</pubDate><guid isPermaLink="false">tag:adnanvaldes.pages.dev,2021-02-02:/add_ssh_key.html</guid><category>blog</category></item></channel></rss>